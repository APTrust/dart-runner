{{ define "workflow/batch.html" }}

{{ template "partials/page_header.html" .}}

<h2>Workflow Batch</h2>

<p>Run all of the directories listed in a spreadsheet through the same workflow. 
For more information, see DART's 
<a href="#Help/openExternal?url=https://aptrust.github.io/dart-docs/users/workflows/batch_jobs/">
batch workflow documentation.</p>

<form method="post" action="#" id="{{ .Form.ID }}">

  {{ template "partials/input_select.html" dict "field" .form.Fields.WorkflowID }}

  {{ template "partials/input_text.html" dict "field" .form.Fields.PathToCSVFile }}
  
  <div class="bottom-buttons">
    <div class="pull-right">
      <a class="btn btn-primary" href="/workflows/runbatch" role="button">Run</a>
    </div>
  </div>

</form>

{{ if .batchErrors }}
<div id="batchValidation">
  <h3>Errors</h3>
  <ul>
    {{ range $index, $error := .batchErrors }}
    <li>{{ $error }}</li>
    {{ end }}
  </ul>
</div>
{{ end }}


<div class="row" id="dartProcessContainer">

</div>

<div class="alert alert-warning" role="alert" id="batchRunning" style="display:none;">
  Leave DART open and stay on this page until all jobs in the batch are complete.
</div>

<div class="alert alert-success" role="alert" id="batchCompleted" style="display:none;">
  All jobs have completed. Check the results below.
</div>

<div class="container mt-2" id="workflowResults" style="display:none;">
  <h3>Results</h3>
</div>

{{ template "partials/page_footer.html" .}}

{{ end }}
